<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>Popcorn Demo</title>
  <meta name="description" content="Popcorn Demo">
</head>

<body>
  <div id="seats"></div>
  <button onclick="getSeats();">Get Seats</button>
  <button onclick="setSeats();">Randomise</button>
  <button onclick="refresh();">Reload</button>
  <button onclick="remove();">Destroy</button>
  <script src="dist/popcorn.min.js"></script>
  <script>
    var seats = [
      {id: 'A1', available: true, booked: true},
      {id: 'A2', available: false, booked: false},
      {id: 'A3', available: true, booked: true},
      {id: 'A4', available: true, booked: false},
      {id: 'A5', available: true, booked: false},
      {id: 'A6', available: true, booked: false},
      {id: 'A7', available: true, booked: false},
      {id: 'A8', available: true, booked: false},
      {id: 'A9', available: true, booked: false},
      {id: 'A10', available: true, booked: false},
      {id: 'A11', available: true, booked: false},
      {id: 'A12', available: true, booked: false},
      {id: 'B1', available: true, booked: false},
      {id: 'B2', available: true, booked: true},
      {id: 'B3', available: true, booked: false},
      {id: 'B4', available: true, booked: true},
      {id: 'B5', available: true, booked: false},
      {id: 'B6', available: true, booked: true},
      {id: 'B7', available: true, booked: false},
      {id: 'B8', available: true, booked: false},
      {id: 'B9', available: true, booked: false},
      {id: 'B10', available: true, booked: false},
      {id: 'B11', available: true, booked: false},
      {id: 'B12', available: true, booked: false},
      {id: 'C1', available: true, booked: true},
      {id: 'C2', available: true, booked: true},
      {id: 'C3', available: true, booked: false},
      {id: 'C4', available: true, booked: false},
      {id: 'C5', available: true, booked: false},
      {id: 'C6', available: true, booked: false},
      {id: 'C7', available: true, booked: false},
      {id: 'C8', available: true, booked: false},
      {id: 'C9', available: true, booked: false},
      {id: 'C10', available: true, booked: false},
      {id: 'C11', available: true, booked: false},
      {id: 'C12', available: true, booked: false},
      {id: 'D1', available: true, booked: false},
      {id: 'D2', available: true, booked: false},
      {id: 'D3', available: true, booked: false},
      {id: 'D4', available: true, booked: false},
      {id: 'D5', available: true, booked: false},
      {id: 'D6', available: true, booked: false},
      {id: 'D7', available: true, booked: false},
      {id: 'D8', available: true, booked: true},
      {id: 'D9', available: false, booked: false},
      {id: 'D10', available: true, booked: true},
      {id: 'D11', available: false, booked: true},
      {id: 'D12', available: true, booked: true},
      {id: 'E1', available: true, booked: false},
      {id: 'E2', available: false, booked: false},
      {id: 'E3', available: true, booked: false},
      {id: 'E4', available: true, booked: false},
      {id: 'E5', available: true, booked: true},
      {id: 'E6', available: true, booked: false},
      {id: 'E7', available: true, booked: false},
      {id: 'E8', available: true, booked: false},
      {id: 'E9', available: true, booked: false},
      {id: 'E10', available: true, booked: false},
      {id: 'E11', available: true, booked: false},
      {id: 'E12', available: true, booked: false},
    ]
    var popcorn = new window.Popcorn({
      elem: '#seats',
      width: 1000,
      height: 500,
      rowWidth: 12,
      maxSeats: 3,
      backgroundColor: '#202020',
      unavailableColor: '#777',
      bookedColor: '#BD1522',
      selectedColor: '#009D3C',
      textColor: 'white',
      seatList: seats,
    });

    function getSeats() {
      alert(popcorn.selected);
    }

    function randomAvailableSeat() {
      var available = seats.filter(seat => seat.available);
      var index = Math.floor(Math.random() * Math.floor(available.length));
      return available[index];
    }

    function setSeats() {
      var seats = [];
      while (seats.length < 3) {
        var seat = randomAvailableSeat().id;
        if (!seats.includes(seat)) seats.push(randomAvailableSeat().id);
      }
      popcorn.selected = seats;
    }

    function refresh() {
      popcorn.redraw();
    }

    function remove() {
      popcorn.destroy();
    }
  </script>
</body>
</html>